<div class="page-wrapper">
  <!-- Sidebar -->
  <div class="overlay" [class.active]="isSidebarOpen" (click)="closeSidebar()"></div>
  
  <div class="sidebar" [class.active]="isSidebarOpen">
    <div class="sidebar-header">
      <div class="profile-section">
        <div class="profile-icon">
          <i class="fa-solid fa-user-circle"></i>
        </div>
        <div class="profile-info" *ngIf="user">
          <h3>{{ user.name || user.username || 'User' }}</h3>
          <p>{{ user.email || 'user@example.com' }}</p>
        </div>
      </div>
    </div>
    <ul class="sidebar-menu">
      <li [class.active]="currentPage === 'dashboard'">
        <a (click)="navigateTo('dashboard')">
          <i class="fa-solid fa-home"></i> Dashboard
        </a>
      </li>
      <li [class.active]="currentPage === 'table-data'">
        <a (click)="navigateTo('table-data')">
          <i class="fa-solid fa-table"></i> Table Data
        </a>
      </li>
      <li [class.active]="currentPage === 'attendance'">
        <a (click)="navigateTo('attendance')">
          <i class="fa-solid fa-calendar-check"></i> Attendance
        </a>
      </li>
      <li [class.active]="currentPage === 'add-member'">
        <a (click)="navigateTo('add-member')">
          <i class="fa-solid fa-user-plus"></i> Add Member
        </a>
      </li>
      <li [class.active]="currentPage === 'memberships'">
        <a (click)="navigateTo('memberships')">
          <i class="fa-solid fa-users"></i> All Memberships
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <nav class="navbar">
      <div class="navbar-container">
        <button class="menu-btn" (click)="toggleSidebar()" *ngIf="!isSidebarOpen">
          <i class="fa-solid fa-bars"></i>
        </button>
        <div class="navbar-left">
          <a class="navbar-brand">Add New Member</a>
        </div>
      </div>
    </nav>

    <div class="page-content">
      <div class="form-card">
        <h2><i class="fa-solid fa-user-plus"></i> Add New Member</h2>
        
        <form [formGroup]="memberForm" (ngSubmit)="onSubmit()" class="member-form">
          <div class="form-row">
            <div class="form-group">
              <label for="username">Username *</label>
              <input type="text" id="username" formControlName="username" placeholder="Enter username" />
              <small *ngIf="memberForm.get('username')?.invalid && memberForm.get('username')?.touched">
                Username is required
              </small>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" formControlName="email" placeholder="Enter email" />
              <small *ngIf="memberForm.get('email')?.invalid && memberForm.get('email')?.touched">
                Valid email is required
              </small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="dob">Date of Birth *</label>
              <input type="date" id="dob" formControlName="dob" />
              <small *ngIf="memberForm.get('dob')?.invalid && memberForm.get('dob')?.touched">
                Date of birth is required
              </small>
            </div>

            <div class="form-group">
              <label for="mobile">Mobile Number *</label>
              <input type="tel" maxlength="10" id="mobile" formControlName="mobile" placeholder="10 digits" />
              <small *ngIf="memberForm.get('mobile')?.invalid && memberForm.get('mobile')?.touched">
                Valid 10-digit mobile number is required
              </small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="password">Password *</label>
              <input type="password" id="password" formControlName="password" placeholder="Min 6 characters" />
              <small *ngIf="memberForm.get('password')?.invalid && memberForm.get('password')?.touched">
                Password must be at least 6 characters
              </small>
            </div>

            <div class="form-group">
              <label for="role">Role *</label>
              <select id="role" formControlName="role">
                <option value="member">Member</option>
                <option value="admin">Admin</option>
                <option value="manager">Manager</option>
              </select>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="reset-btn" (click)="memberForm.reset()">
              <i class="fa-solid fa-rotate"></i> Reset
            </button>
            <button type="submit" class="submit-btn" [disabled]="memberForm.invalid">
              <i class="fa-solid fa-check"></i> Add Member
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
